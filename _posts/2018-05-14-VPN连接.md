---
layout: post
title: 配置VPN 连接 with IKEv2
categories: 
 - server

tags:
  - vpn
  - server
---
![VPN to the ture word](https://raw.githubusercontent.com/xhan97/xhan97.github.io/master/img/vpn.png)

今天有幸拿到一台服务器，主要用途用来科学上网。服务器已经搭建好IKEv2协议的VPN，关于IKEv2，读者可参阅[wiki](https://en.wikipedia.org/wiki/Internet_Key_Exchange)的相关介绍。本文将介绍在不同的操作系统上连接搭建IKEv2的VPN的服务器的操作。

##  所需配置文件

* sswan文件（xx.sswan）
* 个人信息交换文件（xx.p12）
* p12解密密码

## Android (strongSwan app)

首先将所需文件导入到要连接VPN的Android机的本地目录下。一般Android手机不能直接通过本机VPN设置连接到IKEv2协议的VPN。因此在Android机上必须要通过第三方软件来帮助我们连接，这里我们使用[strongSwan](https://www.strongswan.org/)。你可以在[这里](https://download.strongswan.org/Android/)下载到各个版本的APP，并安装。安装完毕后即可开始VPN的配置。
打开strongSwan你将看到如下图所示的界面

![strongSwan 主界面](https://raw.githubusercontent.com/xhan97/xhan97.github.io/master/img/strongswan.png)

这里有两种配置VPN的方式：**手动添加**和**导入VPN配置**。我们下面分别介绍这两种方式的配置：

### 手动添加配置

  * 点击“添加VPN配置”后，填入“服务器地址”，“用户名”，“密码”（可选）
  * 导入证书。去掉CA证书的“自动选择”选项，点击“选择CA证书”，点开右上角隐藏选项，点击“导入证书”，在本地中找到已经放在本机的“xx.p12”文件，输入密码后即可导入。
  * 填写“MTU值”，“IKEV2 Algortthms”和“IPsec/ESP Algorithms”。点看“显示高级设置”，在“xx.sswan”文件中找到相应内容并填入。
  * 点击保存即可。

### 导入VPN配置

  * 点开主界面右上角的隐藏选项，点击“导入VPN设置”。
  * 在本机目录下找到“xx.sswan”文件即可导入。
  * 选择证书。点击“选择用户证书”，选择已经放在本机中的“xx.p12”文件，输入密码p12解密密码即可完成配置。

## Windows 8.1 and 10

Windows 配置相对比较简单。（待补充）


## Enjoy yourself

![strongSwan 主界面](https://raw.githubusercontent.com/xhan97/xhan97.github.io/master/img/skype.png)
